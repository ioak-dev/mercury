(this.webpackJsonpmercury=this.webpackJsonpmercury||[]).push([[0],{106:function(e,t,a){},115:function(e,t,a){},154:function(e,t,a){},187:function(e,t,a){e.exports=a(448)},192:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},241:function(e,t){},243:function(e,t){},276:function(e,t){},277:function(e,t){},343:function(e,t,a){},443:function(e,t,a){},446:function(e,t,a){},447:function(e,t,a){},448:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(50),c=a.n(o),i=(a(192),a(69)),l=a(14),s=a(27),u=a(175),m=a(5),d={isAuth:!1,firstname:"",lastname:""},p={theme:"theme_dark",textSize:"textsize_medium",themeColor:"themecolor1"},f={users:[]},h={data:[]},E={items:[],logs:[]},b={data:[]},g=Object(s.c)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_AUTH":return console.log("GET_AUTH reducer"),Object(m.a)({},e);case"ADD_AUTH":return console.log("ADD_AUTH reducer"),Object(m.a)({},e,{},t.payload);case"REMOVE_AUTH":return console.log("REMOVE_AUTH reducer"),Object(m.a)({},e,{isAuth:!1,firstname:"",lastname:""});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROFILE":return console.log("GET_PROFILE reducer"),Object(m.a)({},e);case"SET_PROFILE":return console.log("SET_PROFILE reducer"),Object(m.a)({},e,{},t.payload);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return console.log("GET_USER reducer"),Object(m.a)({},e);case"ADD_USER":return console.log("ADD_USER reducer"),Object(m.a)({},e,{},t.payload);case"FETCH_ALL_USERS":return console.log("FETCH_ALL_USERS reducer"),Object(m.a)({},e,{},t.payload);default:return e}},category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CATEGORY":return console.log("FETCH_CATEGORY reducer"),Object(m.a)({},e,{},t.payload);default:return e}},request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REQUEST":return console.log("FETCH_REQUEST reducer"),Object(m.a)({},e,{},t.payload);default:return e}},stage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STAGE":return console.log("FETCH_STAGE reducer"),Object(m.a)({},e,{},t.payload);default:return e}}}),v=[u.a],y=Object(s.e)(g,{},Object(s.d)(s.a.apply(void 0,v))),w=(a(106),a(197),a(198),a(11)),N=a(68),_=a(24),j=a(184),O=a(456),A=a(457),k=(a(199),function(e){return r.a.createElement("div",{className:"home full"},"Phoenix WS Test home page")}),T=(a(200),a(201)),R=function(e){return Object(n.useEffect)((function(){if(e.location.search){var t=T.parse(e.location.search);e.cookies.set("mercury_".concat(t.space),t.authKey),e.history.push("/".concat(t.space,"/home"))}}),[]),r.a.createElement(r.a.Fragment,null)},C=(a(213),a(99)),P=(a(214),a(215),function(e){return r.a.createElement("svg",{version:"1.0",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 57 56",enableBackground:"new 0 0 57 56",style:e.dimension},r.a.createElement("g",{id:"Chat-Fenster"},r.a.createElement("g",{id:"chat_FAQ_Accordion2-Copy-13",transform:"translate(-1364.000000, -1001.000000)"},r.a.createElement("g",{id:"Send-Message",transform:"translate(397.000000, 1008.000000)"},r.a.createElement("g",{id:"Send-Button",transform:"translate(990.000000, 10.000000)"},r.a.createElement("g",{id:"Send_1_"},r.a.createElement("path",{style:e.style,d:"M16,0.5c-0.1-0.1-0.3-0.1-0.4-0.1L-7,10.8c-0.1,0.1-0.2,0.2-0.2,0.3s0.1,0.3,0.2,0.3l6.4,3.1 c0.1,0.1,0.3,0,0.4,0L6,9.9l-4.9,4.9C1,14.9,1,15,1,15.1l0.5,6.2c0,0.1,0.1,0.3,0.2,0.3h0.1c0.1,0,0.2,0,0.3-0.1l3.4-3.9l4.2,2 c0.1,0,0.2,0,0.3,0s0.2-0.1,0.2-0.2l5.9-18.6C16.1,0.7,16.1,0.6,16,0.5z"})))))))}),S=function(e){return r.a.createElement("svg",{viewBox:"0 0 73 73",style:e.dimension},r.a.createElement("polygon",{fill:"#27AAE1",points:"38.5,-3.8 37.9,-3.8 37.9,-3.8 38.5,-3.8 "}),r.a.createElement("g",null,r.a.createElement("path",{fill:"#149ED9",d:"M27.6,23c2.6-1.8,5.8-2.9,9.3-2.9c3.4,0,6.6,1.1,9.3,2.9l6.3-7.5c-4.3-3.2-9.7-5.2-15.6-5.2 c-5.8,0-11.2,1.9-15.6,5.2L27.6,23z",style:e.accent}),r.a.createElement("rect",{x:"32",y:"37.4",width:"9.8",height:"25.6",style:e.style}),r.a.createElement("circle",{fill:"none",stroke:"#000000",strokeWidth:"9.75",strokeMiterlimit:"10",cx:"36.9",cy:"36.5",r:"30.9",style:Object(m.a)({},e.style,{fill:"none"})}),r.a.createElement("polygon",{fill:"#27AAE1",points:"37.2,-3.9 36.6,-3.9 36.6,-3.9 37.2,-3.9 \t"}),r.a.createElement("circle",{cx:"36.9",cy:"32.8",r:"7.8",style:e.style})))},I=function(e){var t=function(e){var t={},a="";switch(e){case"primary":a="var(--color-primary-1)";break;case"secondary":a="var(--color-secondary-1)";break;case"tertiary":a="var(--color-tertiary-1)";break;case"success":a="var(--color-success)";break;case"failure":a="var(--color-failure)";break;case"warning":a="var(--color-warning)";break;default:a=e||"var(--color-foreground-1)"}return t.fill=a,t.color=a,t.stroke=a,t},a=function(){var t={};return t.fontSize=e.size?e.size:"24px",e.svg&&(t.height=e.size?e.size:"24px",t.width="auto"),t};return r.a.createElement("div",{className:"oak-icon"},e.mat&&r.a.createElement("i",{className:"material-icons",style:Object(m.a)({},t(e.color),{},a())},e.mat),e.fa&&r.a.createElement("i",{className:"fontawesome-icons ".concat(e.fa),style:Object(m.a)({},t(e.color),{},a())},e.mat),e.svg&&"send"===e.svg&&r.a.createElement(P,{style:t(e.color),accent:e.accent&&t(e.accent),dimension:a()}),e.svg&&"ioak"===e.svg&&r.a.createElement(S,{style:t(e.color),accent:e.accent&&t(e.accent),dimension:a()}))},U=function(e){var t=Object(l.d)((function(e){return e.profile}));return r.a.createElement("button",{className:"oak-button ".concat(function(){var a,n=e.theme?e.theme:"";return n+=(null===t||void 0===t?void 0:null===(a=t.theme)||void 0===a?void 0:a.includes("theme_light"))?" light":"",n+=e.variant?" ".concat(e.variant):"",e.children||(n+=" icon"),n+=e.invert?" invert":"",n+=e.small?" small":"",n+=e.align?" align-".concat(e.align):""}()),onClick:e.action},r.a.createElement("div",{className:"button-label-container"},e.icon&&r.a.createElement(I,{mat:e.icon,size:"1.2em"}),e.fa&&r.a.createElement(I,{fa:e.fa,size:"1.2em"}),e.svg&&r.a.createElement(I,{svg:e.svg,size:"1.2em"}),e.children&&e.children))},F=function(){return r.a.createElement("div",{className:"landing"},r.a.createElement("div",{className:"space-bottom-4"},r.a.createElement("h3",null,"Mirror rorriM"),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Queen"))," ","Magic Mirror on the wall, who now is the fairest one of all?"),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Magic Mirror"))," ","Over the seven jewelled hills, beyond the seventh fall, in the cottage of the seven dwarfs, dwells Snow White, fairest one of all."),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Queen"))," ","Snow White lies dead in the forest. The huntsman has brought me proof. [holds up her opened box] Behold, her heart."),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Magic Mirror"))," ","Snow White still lives, the fairest in the land. Tis the heart of a pig you hold in your hand."),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Queen"))," ","[repulsed] The heart of a pig?! Then I've been tricked!")),r.a.createElement("div",{className:"action"},r.a.createElement(C.a,{to:"/tenant",className:"navitem",activeClassName:"active"},r.a.createElement(U,{theme:"primary",variant:"disappear"},"Create Tenant"))))},L=a(51),x=a.n(L),z="https://appnamehere-service.herokuapp.com/api";function q(e,t,a){return x.a.get((a||z)+e,t)}function D(e,t,a,n){return x.a.post((n||z)+e,t,a)}var G=a(455),M=a(458),H=new G.a;function B(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;H.next({name:e,signal:t,data:a})}var W={API_URL_TENANT:"/tenant",API_URL_TENANT_BANNER:"/tenant/banner",API_URL_TENANT_CREATE:"/tenant/create",API_TENANT_URL:"/tenant/sendURL",API_URL_PRESIGNUP:"/auth/keys",API_URL_RESET:"/auth/reset",API_URL_CODE:"/auth/sendResetCode",API_URL_USER_DETAILS:"/user/details",API_URL_STAGE:"/stage",API_URL_PREDICT:"/model/predict",API_URL_CATEGORY:"/category",API_URL_FAQ:"/faq",API_URL_SR:"/servicerequests",API_URL_USER:"/user",API_URL:"/auth/",API_SIGNIN:"/signin",API_SIGNUP:"/signup",API_KEYS:"/keys",API_JWT:"/signin/jwt"},Q=a(70),K=(a(115),a(233),function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"oak-spinner"},r.a.createElement("div",{className:"spinner-wrapper"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))))}),Y=function(e){var t;return r.a.createElement("div",{className:"message ".concat(e.notification.type)},"running"===e.notification.type&&r.a.createElement("div",{className:"message-icon ".concat("running"===e.notification.type?"running":"")},r.a.createElement("i",{className:"material-icons"},"rotate_right")),"success"===e.notification.type&&r.a.createElement("div",{className:"message-icon"},r.a.createElement("i",{className:"material-icons"},"check_circle_outline")),"warning"===e.notification.type&&r.a.createElement("div",{className:"message-icon"},r.a.createElement("i",{className:"material-icons"},"warning")),"failure"===e.notification.type&&r.a.createElement("div",{className:"message-icon"},r.a.createElement("i",{className:"material-icons"},"error_outline")),r.a.createElement("div",{className:"message-text"},null===(t=e.notification)||void 0===t?void 0:t.message),r.a.createElement("div",{className:"message-action"},r.a.createElement("i",{className:"material-icons",onClick:e.handleRemove},"clear")))},$=function(){var e=Object(n.useState)(!1),t=Object(w.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),i=Object(w.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)({notificationList:[]}),m=Object(w.a)(u,2),d=(m[0],m[1],function(e){s(l.filter((function(t){return t.id!==e.id})))});return Object(n.useEffect)((function(){var e=H.asObservable().subscribe((function(e){"notification"===e.name&&(e.signal?(d(e.data),function(e){var t=Object(Q.a)(l);t.unshift(e),s(t),e.duration?setTimeout((function(){d(e)}),e.duration):e.id||setTimeout((function(){d(e)}),5e3)}(e.data),o(!1)):d(e.data)),"spinner"===e.name&&o(e.signal)}));return function(){return e.unsubscribe()}}),[]),r.a.createElement(r.a.Fragment,null,l&&l.length>0&&r.a.createElement("div",{className:"notification"},l.slice(0,5).reverse().map((function(e){return r.a.createElement("div",{key:e.id||e.message},r.a.createElement(Y,{notification:e,handleRemove:d}))}))),a&&r.a.createElement(K,{"data-test":"spinner"}))},J=a(30),V=(a(234),a(235),function(e){return r.a.createElement("div",{className:"oak-text"},!e.multiline&&r.a.createElement("input",{disabled:e.disabled,autoComplete:"off",className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),type:e.type?e.type:"text",name:e.id,id:e.id,value:e.data[e.id],onChange:e.handleChange,onFocus:function(){e.handleFocus&&e.handleFocus()}}),e.multiline&&r.a.createElement("textarea",{disabled:e.disabled,className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),id:e.id,name:e.id,value:e.data[e.id],onChange:e.handleChange}),r.a.createElement("label",{htmlFor:e.id,className:e.data[e.id]?"active":""},e.label))});var X=a(103),Z=a.n(X),ee=a(104),te=a.n(ee);function ae(e,t,a){var n={cipher:"aes",iter:"12000",ks:256,salt:te.a.enc.Base64.stringify(te.a.enc.Utf8.parse(a))};return Z.a.encrypt(e,t,n)}function ne(e){return null===e||null!==e.match(/^ *$/)}var re=function(e){var t=Object(n.useState)({name:"",email:"",password:"",repeatPassword:"",jwtPassword:"",pageNo:1,created:!1}),a=Object(w.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(null),l=Object(w.a)(i,2),s=l[0],u=l[1],d=Object(n.useState)({name:!1,email:!1,password:!1,repeatPassword:!1,jwtPassword:!1}),p=Object(w.a)(d,2),f=p[0],h=p[1];Object(n.useEffect)((function(){e.getProfile()}),[]);var E=function(e){c(Object(m.a)({},o,Object(J.a)({},e.currentTarget.name,e.currentTarget.value)))},b=function(e){h(Object(m.a)({},f,Object(J.a)({},e,!0)))},g=function(e){(function(e){var t=new FormData;return t.append("tenantName",e.tenantName),t.append("email",e.email),t.append("jwtPassword",e.jwtPassword),t.append("problem",ae(e.password,e.solution,e.salt)),t.append("solution",e.solution),e.banner&&t.append("banner",e.banner,"banner.jpg"),D(W.API_URL_TENANT_CREATE,t,{"Content-Type":"multipart/form-data"}).then((function(e){return Promise.resolve(e)}))})({tenantName:o.name,email:o.email,password:o.password,jwtPassword:o.jwtPassword,solution:e.solution,salt:e.salt,banner:s}).then((function(e){200===e.status?(B("notification",!0,{type:"success",message:"Tenant has been created. You can proceed now",duration:3e3}),c(Object(m.a)({},o,{pageNo:o.pageNo+1,created:!0}))):B("notification",!0,{message:"We are facing some problem, please try after sometime",duration:3e3})})).catch((function(e){B("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})}))};return r.a.createElement("div",{className:"tenant boxed"},!o.created&&r.a.createElement("div",{className:"typography-3 space-bottom-4"},"Tenant creation"),o.created&&r.a.createElement("div",{className:"typography-3 space-bottom-4"},"Tenant [",o.name,"] available now"),1===o.pageNo&&r.a.createElement("div",{className:"form"},r.a.createElement(V,{id:"name",data:o,label:"Tenant Name",handleChange:function(e){return E(e)},errorFields:f}),r.a.createElement(V,{id:"email",data:o,label:"Administrator Email",handleChange:function(e){return E(e)},errorFields:f}),r.a.createElement(V,{id:"password",type:"password",data:o,label:"Administrator Password",handleChange:function(e){return E(e)},errorFields:f}),r.a.createElement(V,{id:"repeatPassword",type:"password",data:o,label:"Repeat Password",handleChange:function(e){return E(e)},errorFields:f}),r.a.createElement(V,{id:"jwtPassword",type:"password",data:o,label:"JWT Password",handleChange:function(e){return E(e)},errorFields:f}),r.a.createElement("label",{className:"file-upload space-top-1 space-bottom-4"},r.a.createElement("input",{type:"file",accept:"image/png, image/jpeg",onChange:function(e){u(e.target.files[0])},required:!0}),r.a.createElement("i",{className:"material-icons"},"add_photo_alternate"),!s&&"Choose Banner/Cover Image",s&&s.name),r.a.createElement("div",{className:"action"},r.a.createElement(U,{theme:"primary",variant:"appear",action:function(e){e.preventDefault(),B("spinner"),h({name:!1,email:!1,password:!1,repeatPassword:!1,jwtPassword:!1}),(ne(o.name)?(b("name"),B("notification",!0,{type:"failure",message:"Tenant name cannot be empty",duration:3e3}),0):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(o.email)?ne(o.password)?(b("password"),B("notification",!0,{type:"failure",message:"Password cannot be empty",duration:3e3}),0):o.password===o.repeatPassword||(b("repeatPassword"),B("notification",!0,{type:"failure",message:"Password and repeat password should be same",duration:3e3}),0):(b("email"),B("notification",!0,{type:"failure",message:"Email ID is invalid",duration:3e3}),0))&&function(e){return q(W.API_URL+e.name+W.API_KEYS,null).then((function(e){return Promise.resolve(e)}))}({name:o.name}).then((function(e){200===e.status&&g(e.data)}))}},"Create Tenant"))),o.created&&r.a.createElement(U,{theme:"primary",variant:"disappear",action:function(){e.history.push("/".concat(o.name,"/home"))}},"Take me to my tenant"))},oe=a(105),ce=a.n(oe),ie=a(177),le=a(178),se=a(179),ue=function(e){return function(t){t({type:"ADD_AUTH",payload:e})}};function me(){var e=Object(le.a)(["\n  query Session($key: ID!) {\n    session(key: $key) {\n      id\n      firstName\n      lastName\n      email\n      token\n    }\n  }\n"]);return me=function(){return e},e}a.n(se)()(me());var de=function(e){var t=Object(l.d)((function(e){return e.authorization})),a=Object(l.d)((function(e){return e.profile})),n=Object(l.c)(),o=function(e){switch(B("spaceChange",!0,""),e){case"readAuthentication":return i();case"authenticate":return c();case"isAdmin":return u();default:return!0}},c=function(){return s("space")},i=function(){return s("space",!1)},s=function(){var a=Object(ie.a)(ce.a.mark((function a(r){var o,c,i,l,s=arguments;return ce.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=!(s.length>1&&void 0!==s[1])||s[1],B("spaceChange",!0,e.match.params.tenant),!t.isAuth){a.next=4;break}return a.abrupt("return",!0);case 4:if(c="mercury_".concat(e.match.params.tenant),i=e.cookies.get(c),l="/account/user/".concat(e.match.params.tenant),!i){a.next=11;break}try{q("".concat(l,"/session/").concat(i),null).then((function(e){console.log("success"),200===e.status&&n(ue({isAuth:!0,token:e.data.token,secret:"",firstName:e.data.first_name,lastName:e.data.last_name,email:e.data.email,type:e.data.type,userId:e.data.user_id}))})).catch((function(t){e.cookies.remove(c),o&&404===t.response.status?(B("notification",!0,{type:"failure",message:"Invalid session token",duration:3e3}),m(e.match.params.tenant)):o&&401===t.response.status?(B("notification",!0,{type:"failure",message:"Session expired",duration:3e3}),m(e.match.params.tenant)):o&&401===t.response.status&&(B("notification",!0,{type:"failure",message:"Unhandled exception",duration:3e3}),m(e.match.params.tenant))}))}catch(r){console.log(r)}a.next=16;break;case 11:if(!o){a.next=15;break}m(e.match.params.tenant),a.next=16;break;case 15:return a.abrupt("return",!0);case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),u=function(){return d(),!1},m=function(e){window.location.href="".concat("https://oneauth.ioak.org","/#/space/").concat(e,"/login?type=signin&appId=").concat("e8debb00e3b16b4b32222639")},d=function(){e.history.push("/".concat(a.tenant,"/unauthorized"))};return r.a.createElement(r.a.Fragment,null,function(){var t;return null===(t=e.middleware)||void 0===t||t.forEach((function(e){if(!o(e))return!1})),!0}()&&r.a.createElement(e.component,Object.assign({},e,{profile:a,space:e.match.params.tenant})))},pe=function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),"Unauthorized")},fe=(a(343),a(154),function(e){var t=Object(l.d)((function(e){return e.authorization}));return r.a.createElement("div",{className:"action"},t.isAuth&&r.a.createElement(U,{theme:"primary",variant:"disappear",small:!0},r.a.createElement("i",{className:"material-icons"},"power_settings_new"),"Logout"),!t.isAuth&&r.a.createElement(U,{theme:"primary",variant:"appear",align:"left",small:!0,action:function(){window.location.href="".concat("https://oneauth.ioak.org","/#/space/").concat(e.space,"/login?appId=").concat("e8debb00e3b16b4b32222639")}},r.a.createElement("i",{className:"material-icons"},"person"),"Login"))}),he=function(e){return r.a.createElement("div",{className:"left-panel"},r.a.createElement("div",null,"left panel"),r.a.createElement(fe,{space:e.space}))},Ee=(a(90),a(180)),be=a(181),ge=a(185),ve=a(182),ye=a(186),we=a(183),Ne=a.n(we),_e=(a(443),a(444),a(445),a(446),function(e){return r.a.createElement("div",{className:"oak-editor-toolbar"},r.a.createElement("div",{id:"toolbar"},r.a.createElement("button",{className:"toolbar-icon ql-bold"}),r.a.createElement("button",{className:"toolbar-icon ql-italic"}),r.a.createElement("button",{className:"toolbar-icon ql-underline"}),r.a.createElement("button",{className:"toolbar-icon ql-strike"}),e.align&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"toolbar-icon ql-align",value:"center"}),r.a.createElement("button",{className:"toolbar-icon ql-align",value:"right"}),r.a.createElement("button",{className:"toolbar-icon ql-align",value:"justify"})),r.a.createElement("button",{className:"toolbar-icon ql-list",value:"ordered"}),r.a.createElement("button",{className:"toolbar-icon ql-list",value:"bullet"}),e.indent&&r.a.createElement("button",{className:"toolbar-icon ql-indent",value:"-1"}),e.indent&&r.a.createElement("button",{className:"toolbar-icon ql-indent",value:"+1"}),e.color&&r.a.createElement("select",{className:"toolbar-icon ql-color"},r.a.createElement("option",{value:"red"}),r.a.createElement("option",{value:"green"}),r.a.createElement("option",{value:"blue"}),r.a.createElement("option",{value:"#f0f0f0"}),r.a.createElement("option",{selected:!0})),r.a.createElement("button",{className:"toolbar-icon ql-blockquote"}),e.font&&r.a.createElement("select",{className:"toolbar-icon ql-font"}),e.heading&&r.a.createElement("select",{className:"toolbar-icon ql-header"}),e.size&&r.a.createElement("select",{className:"toolbar-icon ql-size"}),r.a.createElement("button",{className:"toolbar-icon ql-image"})))}),je=function(e){function t(e){var a;return Object(Ee.a)(this,t),(a=Object(ge.a)(this,Object(ve.a)(t).call(this,e))).formats=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","color","font","code-block","link","image","background","align","size"],a.modules={toolbar:{container:"#toolbar"},keyboard:{bindings:{linebreak:{key:13,shiftKey:!1,handler:function(e){}}}}},a.IMAGE_MIME_REGEX=/^image\/(p?jpeg|gif|png)$/i,a.loadImage=function(e){var t=new FileReader;t.onload=function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.target)||void 0===t?void 0:t.result){var a,n,r=document.createElement("img");r.src=e.target.result;var o=null===(a=window)||void 0===a?void 0:null===(n=a.getSelection())||void 0===n?void 0:n.getRangeAt(0);o&&(o.deleteContents(),o.insertNode(r))}},t.readAsDataURL(e)},a.handleEnter=function(e){13!==e.keyCode||e.shiftKey||"<p><br></p>"===a.props.data[a.props.id]||a.props.handleEnter&&a.props.handleEnter()},a.handleChange=function(e,t,n){"api"===n&&a.state.blockApiChangeEvents?a.setState({blockApiChangeEvents:!1}):a.props.handleChange({target:{name:a.props.id,value:e}})},a.handleFocus=function(){a.setState(Object(m.a)({},a.state,{customClass:"active"}))},a.handleBlur=function(){a.setState(Object(m.a)({},a.state,{customClass:""}))},a.state={customClass:"",blockApiChangeEvents:!0},a}return Object(ye.a)(t,e),Object(be.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.onpaste=function(t){var a,n=null===(a=t.clipboardData)||void 0===a?void 0:a.items;if(n)for(var r=0;r<n.length;r+=1)if(e.IMAGE_MIME_REGEX.test(n[r].type))return t.preventDefault(),void e.loadImage(n[r].getAsFile())}}},{key:"render",value:function(){return r.a.createElement("div",{className:"oak-editor ".concat(this.props.bubble?"bubble":""," ").concat(this.state.customClass," ").concat(this.props.center?"center":"")},r.a.createElement("label",null,this.props.label),!this.props.bottom&&r.a.createElement(_e,{indent:this.props.indent,font:this.props.font,heading:this.props.heading,size:this.props.size,color:this.props.color,align:this.props.align}),r.a.createElement("div",{className:"quill-wrapper"},r.a.createElement(Ne.a,{value:this.props.data[this.props.id],onChange:this.handleChange,theme:this.props.bubble?"bubble":"snow",modules:this.modules,formats:this.formats,onKeyUp:this.handleEnter,onFocus:this.handleFocus,onBlur:this.handleBlur})),this.props.bottom&&r.a.createElement(_e,{indent:this.props.indent,font:this.props.font,heading:this.props.heading,size:this.props.size,color:this.props.color,align:this.props.align}))}}]),t}(r.a.Component),Oe=function(e){var t=Object(n.useState)({message:""}),a=Object(w.a)(t,2),o=a[0],c=a[1],i=function(){e.channel.push("new_message",{body:o.message},1e4),c({message:""})};return r.a.createElement("div",{className:"compose-section"},r.a.createElement("form",{method:"GET",onSubmit:i,noValidate:!0},r.a.createElement(je,{data:o,id:"message",handleChange:function(e){c(Object(m.a)({},o,Object(J.a)({},e.target.name,e.target.value)))},handleEnter:i,bottom:!0,size:!0,color:!0,align:!0})))},Ae=(a(447),function(e){return r.a.createElement("div",{className:"oak-viewer"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.children||""}}))}),ke=function(e){var t=Object(n.useState)([]),a=Object(w.a)(t,2),o=a[0],c=a[1];return Object(n.useEffect)((function(){e.channel&&e.channel.on("new_message",(function(e){c((function(t){return[].concat(Object(Q.a)(t),[e])}));var t=document.getElementById("message-stream");t&&(t.scrollTop=t.scrollHeight-t.clientHeight)}))}),[e.channel]),r.a.createElement("div",{className:"message-stream-container",id:"message-stream"},r.a.createElement("div",{className:"message-stream"},o.map((function(e){return r.a.createElement(Ae,{key:Object(M.a)()},e.body)}))))},Te=function(e){return r.a.createElement("div",{className:"main-section"},r.a.createElement("div",{className:"header-wrapper"},"Phoenix WS Test"),r.a.createElement("div",{className:"message-stream-wrapper"},r.a.createElement(ke,{channel:e.channel})),r.a.createElement("div",{className:"compose-wrapper"},r.a.createElement(Oe,{socket:e.socket,channel:e.channel})))},Re=function(e){return r.a.createElement("div",{className:"dash"},r.a.createElement("div",{className:"left-panel-wrapper"},r.a.createElement(he,{space:e.space})),r.a.createElement("div",{className:"main-section-wrapper"},r.a.createElement(Te,{socket:e.socket,channel:e.channel})))},Ce={themecolor1:Pe("#69A7BF"),themecolor2:Pe("#99587B"),themecolor3:Pe("#A66C26"),themecolor4:Pe("#37AE82")};function Pe(e){return Object(O.a)({palette:{primary:{main:e},secondary:{main:e}}})}var Se=Object(l.b)((function(e){return{user:e.user,profile:e.profile}}),{getProfile:function(){return function(e){e({type:"GET_PROFILE"})}},setProfile:function(e){return function(t){t({type:"SET_PROFILE",payload:e})}},getUser:function(){return function(e){e({type:"GET_USER"})}},addUser:function(e){return function(t){t({type:"ADD_USER",payload:e})}}})(Object(i.b)((function(e){var t=Object(l.d)((function(e){return e.authorization})),a=Object(n.useState)(),o=Object(w.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(),u=Object(w.a)(s,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){e.getProfile()}),[]),Object(n.useEffect)((function(){t.isAuth&&!c&&(console.log(t),i(new N.Socket("".concat("ws://mercury-ws.herokuapp.com","/socket/websocket?auth_token=").concat(t.token),{params:{auth_token:t.token}})))}),[t]),Object(n.useEffect)((function(){if(c){c.connect(),c.onError((function(){return console.log("there was an error with the connection!")})),c.onClose((function(){return console.log("the connection dropped")}));var e=c.channel("user:".concat(t.userId));e.join().receive("ok",(function(e){var t=e.messages;return console.log("catching up",t)})).receive("error",(function(e){var t=e.reason;return console.log("failed join",t)})).receive("timeout",(function(){return console.log("Networking issue. Still waiting...")})),d(e)}}),[c]),r.a.createElement("div",{className:"App ".concat(e.profile.theme," ").concat(e.profile.textSize," ").concat(e.profile.themeColor)},r.a.createElement(j.HashRouter,null,r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"body-content"},r.a.createElement($,null),r.a.createElement(A.a,{theme:Ce.themecolor1},r.a.createElement(_.Route,{path:"/login",render:function(t){return r.a.createElement(de,Object.assign({},t,e,{component:R}))}}),r.a.createElement(_.Route,{path:"/:tenant/unauthorized",render:function(t){return r.a.createElement(de,Object.assign({},t,e,{component:pe,middleware:["isAuthenticated"]}))}}),r.a.createElement(_.Route,{path:"/",exact:!0,render:function(t){return r.a.createElement(de,Object.assign({},t,e,{component:F}))}}),r.a.createElement(_.Route,{path:"/home",exact:!0,render:function(t){return r.a.createElement(de,Object.assign({},t,e,{component:F}))}}),r.a.createElement(_.Route,{path:"/tenant",exact:!0,render:function(t){return r.a.createElement(de,Object.assign({},t,e,{component:re}))}}),r.a.createElement(_.Route,{path:"/:tenant/home",render:function(t){return r.a.createElement(de,Object.assign({},t,e,{component:k,middleware:["readAuthentication"]}))}}),r.a.createElement(_.Route,{path:"/:tenant/dash",render:function(t){return r.a.createElement(de,Object.assign({},t,e,{component:Re,middleware:["readAuthentication"],socket:c,channel:m}))}}),r.a.createElement(_.Route,{path:"/:tenant",exact:!0,render:function(t){return r.a.createElement(de,Object.assign({},t,e,{component:k,middleware:["readAuthentication"]}))}}))))))}))),Ie=function(e){return r.a.createElement(l.a,{store:y},r.a.createElement(Se,e))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,null,r.a.createElement(Ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,a){}},[[187,1,2]]]);
//# sourceMappingURL=main.33071959.chunk.js.map